(function(_0x4e37d5,_0x1a4010){const _0x11d4cc=_0x162f,_0x4475e1=_0x4e37d5();while(!![]){try{const _0x204167=-parseInt(_0x11d4cc(0x148))/0x1*(-parseInt(_0x11d4cc(0x141))/0x2)+-parseInt(_0x11d4cc(0x13a))/0x3+parseInt(_0x11d4cc(0x159))/0x4+-parseInt(_0x11d4cc(0x12c))/0x5+-parseInt(_0x11d4cc(0x13b))/0x6+parseInt(_0x11d4cc(0x12e))/0x7*(-parseInt(_0x11d4cc(0x149))/0x8)+parseInt(_0x11d4cc(0x123))/0x9*(parseInt(_0x11d4cc(0x11e))/0xa);if(_0x204167===_0x1a4010)break;else _0x4475e1['push'](_0x4475e1['shift']());}catch(_0x2a6f15){_0x4475e1['push'](_0x4475e1['shift']());}}}(_0x4512,0x994d0));const _0x4f7e44=_0x30af;(function(_0x260b19,_0x38740f){const _0xfe63e4=_0x162f,_0x1ca5ad=_0x30af,_0x1175b6=_0x260b19();while(!![]){try{const _0x512685=-parseInt(_0x1ca5ad(0x1ee))/0x1*(parseInt(_0x1ca5ad(0x1eb))/0x2)+parseInt(_0x1ca5ad(0x1fb))/0x3+-parseInt(_0x1ca5ad(0x1f4))/0x4+parseInt(_0x1ca5ad(0x1e0))/0x5*(parseInt(_0x1ca5ad(0x1ff))/0x6)+parseInt(_0x1ca5ad(0x1f5))/0x7+parseInt(_0x1ca5ad(0x212))/0x8+-parseInt(_0x1ca5ad(0x209))/0x9;if(_0x512685===_0x38740f)break;else _0x1175b6[_0xfe63e4(0x13e)](_0x1175b6[_0xfe63e4(0x125)]());}catch(_0x3f481f){_0x1175b6[_0xfe63e4(0x13e)](_0x1175b6[_0xfe63e4(0x125)]());}}}(_0x3349,0x6b9c9));function _0x4512(){const _0x3f83be=['nodeType','parts','\x22\x20target=\x22_blank\x22\x20class=\x22link-document\x22>','className','user-input','Lỗi\x20khi\x20tải\x20dữ\x20liệu:','stringify','temporary','Lỗi\x20gọi\x20API:','replaceChild','scrollTop','\x22\x20và\x20hãy\x20chỉnh\x20câu\x20trả\x20lời\x20sinh\x20động.\x20không\x20gửi\x20nhiều\x201\x20lần\x20đường\x20dẫn\x20https\x20\x20','includes','TEXT_NODE','&quot;','1YatKld','6896240XCdJnQ','key','Tính\x20năng\x20này\x20đã\x20bị\x20vô\x20hiệu\x20hóa.','createElement','<br>$1','9uEEuHb','1574526VXNjTz','shift','30sYnLEu','https://raw.githubusercontent.com/nguyenledangkhoaa/ai/main/data.json','replace','candidates','\x22.\x0a','https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=','1457665GoeyCs','getElementById','1225BjglIQ','&amp;','application/json','3486344GYTQPY','text','scrollHeight','Không\x20có\x20phản\x20hồi.','user','393890QnZzkJ','appendChild','preventDefault','<br>','424281NMaoez','3498672gzYivH','div','send-btn','push','answer','shiftKey','2gAJTth','value','F12','from','keyword','textContent','</a>','872419jVwOGT','15784igjhvJ','cloneNode','&gt;','message\x20','keydown','POST','split','classList','Người\x20dùng\x20hỏi:\x20\x22','2329660VCqWgN','Enter','AIzaSyDGn0h1_hQl1tegCY9nzyn4FTxuip7hc4s','error','innerHTML','Giới\x20thiệu\x20và\x20xin\x20chào:\x20Xin\x20chào\x20tôi\x20là\x20chatbot\x20AI\x20được\x20triển\x20khai\x20bởi\x20NLDK.\x20Bạn\x20cần\x20tôi\x20hỗ\x20trợ\x20gì\x20về\x20tài\x20liệu\x20học\x20tập,\x20hay\x20cần\x20liên\x20hệ\x20với\x20NLDK\x20hoặc\x20điều\x20gì\x20khác.\x20Tôi\x20là\x20AI\x20chia\x20sẻ\x20tài\x20liệu\x20ôn\x20thi\x20cho\x20sinh\x20viên\x20HUIT','Dưới\x20đây\x20là\x20nội\x20dung\x20:\x0a\x22','1708896rUIcrY'];_0x4512=function(){return _0x3f83be;};return _0x4512();}const apiKey=_0x4f7e44(0x20b),systemPrompt=_0x4f7e44(0x20a);let isProcessing=![],conversationHistory=[{'role':_0x4f7e44(0x1f0),'parts':[{'text':systemPrompt}]}];function escapeHTML(_0x4717de){const _0x4c6281=_0x4f7e44;return _0x4717de[_0x4c6281(0x20d)](/[&<>"']/g,function(_0x467219){const _0x20177b=_0x4c6281;return{'&':_0x20177b(0x1d0),'<':_0x20177b(0x1e6),'>':_0x20177b(0x210),'\x22':_0x20177b(0x1cd),'\x27':_0x20177b(0x1ed)}[_0x467219];});}async function sendMessage(){const _0x4d436d=_0x162f,_0x50b7ba=_0x4f7e44;if(isProcessing)return;isProcessing=!![];const _0x1d2c4f=document[_0x50b7ba(0x1ce)](_0x50b7ba(0x21a)),_0x4c1f7d=document[_0x4d436d(0x12d)](_0x4d436d(0x13d)),_0x347167=_0x1d2c4f[_0x50b7ba(0x1d9)][_0x50b7ba(0x21d)]();if(!_0x347167)return;_0x4c1f7d[_0x50b7ba(0x1df)]=!![],displayMessage(_0x347167,_0x4d436d(0x135)),_0x1d2c4f['value']='';const _0x54fa17=displayMessage(_0x50b7ba(0x21c),'ai',!![]),_0x582e7f=_0x347167[_0x50b7ba(0x1e5)](),_0x1f778e=await searchLocalData(_0x582e7f);let _0x3f1a2c='';_0x1f778e?_0x3f1a2c=_0x50b7ba(0x219)+_0x347167+_0x50b7ba(0x1e2)+(_0x50b7ba(0x20e)+_0x1f778e[_0x50b7ba(0x1e7)]+_0x50b7ba(0x203)):_0x3f1a2c=_0x347167,conversationHistory[_0x50b7ba(0x204)]({'role':_0x50b7ba(0x1f0),'parts':[{'text':_0x3f1a2c}]});const _0x4076ec=await sendMessageToGemini(conversationHistory);conversationHistory[_0x50b7ba(0x204)]({'role':_0x50b7ba(0x1f1),'parts':[{'text':_0x4076ec}]}),replaceMessage(_0x54fa17,_0x4076ec),_0x4c1f7d[_0x50b7ba(0x1df)]=![],isProcessing=![];}function displayMessage(_0x5ebb29,_0x4bb2ac,_0x30ce5e=![]){const _0x13f6ab=_0x162f,_0x48a1a0=_0x4f7e44,_0x16c9b6=document[_0x48a1a0(0x1ce)](_0x48a1a0(0x1f8));let _0x4bdbc8=escapeHTML(_0x5ebb29);_0x4bdbc8=_0x4bdbc8[_0x48a1a0(0x20d)](/\*\*(.*?)\*\*/g,_0x48a1a0(0x202)),_0x4bdbc8=_0x4bdbc8[_0x48a1a0(0x20d)](/\s\*\s/g,_0x48a1a0(0x1d7));const _0x34be50=document[_0x48a1a0(0x1f9)]('p');return _0x34be50[_0x13f6ab(0x15d)]=_0x48a1a0(0x1f6)+_0x4bb2ac,_0x34be50[_0x48a1a0(0x1fd)]=_0x4bdbc8,_0x30ce5e&&_0x34be50[_0x48a1a0(0x206)][_0x48a1a0(0x1e1)](_0x13f6ab(0x161)),_0x16c9b6[_0x48a1a0(0x1dd)](_0x34be50),_0x16c9b6[_0x48a1a0(0x217)]=_0x16c9b6[_0x48a1a0(0x205)],_0x34be50;}function typeHTMLByWord(_0x366bb4,_0xdeb8c4,_0x2ae64b=0x64){const _0x37f697=_0x4f7e44,_0x2a0a6d=document[_0x37f697(0x1f9)](_0x37f697(0x1dc));_0x2a0a6d[_0x37f697(0x1fd)]=_0xdeb8c4;const _0x31e30c=Array[_0x37f697(0x1e4)](_0x2a0a6d[_0x37f697(0x214)]);let _0x2b3d06=0x0;function _0x1c2719(){const _0x35aae1=_0x37f697;if(_0x2b3d06>=_0x31e30c[_0x35aae1(0x1d4)])return;const _0x20ef8f=_0x31e30c[_0x2b3d06++];_0x53ade4(_0x20ef8f,_0x366bb4,_0x1c2719);}function _0x53ade4(_0x242035,_0x10b178,_0x141e97){const _0xab310b=_0x37f697;if(_0x242035[_0xab310b(0x1d6)]===Node[_0xab310b(0x1d1)]){const _0x188623=_0x242035[_0xab310b(0x21b)][_0xab310b(0x1e8)](/(\s+)/);let _0x185493=0x0;const _0x584b8f=document[_0xab310b(0x1f9)](_0xab310b(0x1da));_0x10b178[_0xab310b(0x1dd)](_0x584b8f);function _0x3878f0(){const _0x213dc5=_0x162f,_0x2b997c=_0xab310b;_0x185493<_0x188623[_0x2b997c(0x1d4)]?(_0x584b8f[_0x2b997c(0x21b)]+=_0x188623[_0x185493++],document[_0x2b997c(0x1ce)](_0x2b997c(0x1f8))[_0x2b997c(0x217)]=document[_0x2b997c(0x1ce)]('chat-box')[_0x213dc5(0x133)],setTimeout(_0x3878f0,_0x2ae64b)):_0x141e97();}_0x3878f0();}else{if(_0x242035[_0xab310b(0x1d6)]===Node[_0xab310b(0x207)]){const _0x2fdf02=_0x242035[_0xab310b(0x1de)](![]);_0x10b178[_0xab310b(0x1dd)](_0x2fdf02);const _0x118b57=Array[_0xab310b(0x1e4)](_0x242035[_0xab310b(0x214)]);let _0xe94e8c=0x0;function _0x2e11b9(){_0xe94e8c<_0x118b57['length']?_0x53ade4(_0x118b57[_0xe94e8c++],_0x2fdf02,_0x2e11b9):_0x141e97();}_0x2e11b9();}else _0x141e97();}}_0x1c2719();}function replaceMessage(_0x4bb3be,_0x4ced49){const _0x1216ec=_0x162f,_0x43023b=_0x4f7e44,_0x2c9c2e=document[_0x43023b(0x1ce)](_0x43023b(0x1f8));let _0x47c324=escapeHTML(_0x4ced49);_0x47c324=_0x47c324[_0x43023b(0x20d)](/\*\*(.*?)\*\*/g,_0x43023b(0x202)),_0x47c324=_0x47c324[_0x43023b(0x20d)](/\s\*\s/g,_0x1216ec(0x139)),_0x47c324=_0x47c324[_0x1216ec(0x128)](/^(\d+\.\s)/gm,_0x43023b(0x201));const _0x4b6eff=/(https?:\/\/[^\s]+|www\.[^\s]+)/g;_0x47c324=_0x47c324[_0x43023b(0x20d)](_0x4b6eff,function(_0x3db0c0){const _0xf98bc7=_0x43023b;return _0xf98bc7(0x1f2)+_0x3db0c0+_0xf98bc7(0x208)+_0x3db0c0+_0xf98bc7(0x1fa);});const _0x2bd3b0=document[_0x43023b(0x1f9)]('p');_0x2bd3b0['className']=_0x43023b(0x1d5),_0x2bd3b0[_0x43023b(0x1fd)]='\x20',_0x2c9c2e[_0x43023b(0x211)](_0x2bd3b0,_0x4bb3be),_0x2c9c2e[_0x1216ec(0x164)]=_0x2c9c2e[_0x43023b(0x205)],typeHTMLByWord(_0x2bd3b0,_0x47c324,0x5);}async function sendMessageToGemini(_0x2e2073){const _0x59b504=_0x162f,_0x523723=_0x4f7e44;try{const _0x2263d5=await fetch(_0x59b504(0x12b)+apiKey,{'method':_0x59b504(0x14e),'headers':{'Content-Type':_0x523723(0x215)},'body':JSON[_0x523723(0x1e9)]({'contents':_0x2e2073})}),_0x7d465a=await _0x2263d5[_0x523723(0x1cf)](),_0x4e200a=_0x7d465a?.[_0x59b504(0x129)]?.[0x0]?.[_0x523723(0x1db)]?.[_0x523723(0x1fc)]?.[0x0]?.[_0x523723(0x200)];return _0x4e200a||_0x59b504(0x134);}catch(_0x22548a){return console[_0x523723(0x1ef)](_0x523723(0x1fe),_0x22548a),_0x523723(0x1d2);}}function _0x3349(){const _0x2a3778=_0x162f,_0x2293cb=[_0x2a3778(0x136),_0x2a3778(0x14c),_0x2a3778(0x138),'chat-box',_0x2a3778(0x121),_0x2a3778(0x147),_0x2a3778(0x124),_0x2a3778(0x15b),_0x2a3778(0x156),_0x2a3778(0x162),_0x2a3778(0x126),'text',_0x2a3778(0x122),'<strong>$1</strong>',_0x2a3778(0x165),_0x2a3778(0x13e),_0x2a3778(0x133),_0x2a3778(0x150),'ELEMENT_NODE',_0x2a3778(0x15c),'2849319lmfioq',_0x2a3778(0x157),_0x2a3778(0x154),_0x2a3778(0x153),_0x2a3778(0x128),_0x2a3778(0x158),'filter',_0x2a3778(0x14b),_0x2a3778(0x163),_0x2a3778(0x131),'ctrlKey','childNodes',_0x2a3778(0x130),_0x2a3778(0x145),'scrollTop','parse',_0x2a3778(0x151),_0x2a3778(0x15e),_0x2a3778(0x146),'Bot\x20đang\x20trả\x20lời...','trim',_0x2a3778(0x11c),_0x2a3778(0x12d),'json',_0x2a3778(0x12f),_0x2a3778(0x167),'Đã\x20xảy\x20ra\x20lỗi\x20khi\x20gọi\x20Gemini\x20API.',_0x2a3778(0x127),'length','message\x20ai',_0x2a3778(0x15a),_0x2a3778(0x139),_0x2a3778(0x143),_0x2a3778(0x142),'span','content',_0x2a3778(0x13c),_0x2a3778(0x137),_0x2a3778(0x14a),'disabled','740215tkyxdo','add',_0x2a3778(0x12a),_0x2a3778(0x120),_0x2a3778(0x144),'toLowerCase','&lt;',_0x2a3778(0x13f),_0x2a3778(0x14f),_0x2a3778(0x160),_0x2a3778(0x15f),'834674zRTiCE',_0x2a3778(0x11f),'&#39;',_0x2a3778(0x11d),_0x2a3778(0x155),_0x2a3778(0x135),'model','<a\x20href=\x22',_0x2a3778(0x14d),_0x2a3778(0x152)];return _0x3349=function(){return _0x2293cb;},_0x3349();}function _0x30af(_0x3a72b3,_0x56179d){const _0x43f415=_0x3349();return _0x30af=function(_0x2798fa,_0x10a108){_0x2798fa=_0x2798fa-0x1cd;let _0x55ecaa=_0x43f415[_0x2798fa];return _0x55ecaa;},_0x30af(_0x3a72b3,_0x56179d);}function _0x162f(_0x6b5794,_0x238bbc){const _0x451200=_0x4512();return _0x162f=function(_0x162f5b,_0x1d89e2){_0x162f5b=_0x162f5b-0x11c;let _0x3f17dc=_0x451200[_0x162f5b];return _0x3f17dc;},_0x162f(_0x6b5794,_0x238bbc);}async function searchLocalData(_0x31557c){const _0x215fa4=_0x162f,_0x10cd03=_0x4f7e44;try{const _0x496320=await fetch(_0x10cd03(0x1d3)),_0x97b4c6=await _0x496320[_0x215fa4(0x132)](),_0x3bc418=_0x97b4c6[_0x10cd03(0x1e8)]('\x0a')[_0x10cd03(0x20f)](_0x5e94e0=>_0x5e94e0['trim']()!=='');for(const _0x3bec58 of _0x3bc418){const _0x50fef7=JSON[_0x10cd03(0x218)](_0x3bec58),_0x12f621=_0x50fef7[_0x10cd03(0x216)];for(const _0x2c94c1 of _0x12f621){if(_0x31557c[_0x10cd03(0x1e5)]()[_0x215fa4(0x166)](_0x2c94c1[_0x10cd03(0x1e5)]()))return{'answer':_0x50fef7[_0x10cd03(0x1e7)]};}}return null;}catch(_0x18683e){return console[_0x10cd03(0x1ef)](_0x10cd03(0x1ea),_0x18683e),null;}}document['addEventListener'](_0x4f7e44(0x1f3),function(_0x4ad891){const _0x5393ee=_0x162f,_0x1db259=_0x4f7e44,_0x4e1560=document[_0x5393ee(0x12d)](_0x1db259(0x21a));_0x4ad891[_0x1db259(0x1ec)]===_0x1db259(0x20c)&&!_0x4e1560[_0x1db259(0x1df)]&&sendMessage(),(_0x4ad891[_0x1db259(0x1ec)]===_0x1db259(0x1d8)||_0x4ad891[_0x1db259(0x213)]&&_0x4ad891[_0x5393ee(0x140)]&&(_0x4ad891[_0x5393ee(0x11f)]==='I'||_0x4ad891[_0x1db259(0x1ec)]==='J')||_0x4ad891[_0x1db259(0x213)]&&_0x4ad891[_0x1db259(0x1ec)]==='U')&&(_0x4ad891[_0x1db259(0x1f7)](),alert(_0x1db259(0x1e3)));});
