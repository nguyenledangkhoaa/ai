const _0x4f7e44=_0x30af;(function(_0x5e0bce,_0x2adec4){const _0x2c77e7=_0x30af,_0x28e4f7=_0x5e0bce();while(!![]){try{const _0x256d11=-parseInt(_0x2c77e7(0x1ee))/0x1*(parseInt(_0x2c77e7(0x1eb))/0x2)+parseInt(_0x2c77e7(0x1fb))/0x3+-parseInt(_0x2c77e7(0x1f4))/0x4+parseInt(_0x2c77e7(0x1e0))/0x5*(parseInt(_0x2c77e7(0x1ff))/0x6)+parseInt(_0x2c77e7(0x1f5))/0x7+parseInt(_0x2c77e7(0x212))/0x8+-parseInt(_0x2c77e7(0x209))/0x9;if(_0x256d11===_0x2adec4)break;else _0x28e4f7['push'](_0x28e4f7['shift']());}catch(_0x35a3e3){_0x28e4f7['push'](_0x28e4f7['shift']());}}}(_0x3349,0x6b9c9));const apiKey=_0x4f7e44(0x20b),systemPrompt=_0x4f7e44(0x20a);let isProcessing=![],conversationHistory=[{'role':_0x4f7e44(0x1f0),'parts':[{'text':systemPrompt}]}];function escapeHTML(_0x106fd2){const _0x4954c6=_0x4f7e44;return _0x106fd2[_0x4954c6(0x20d)](/[&<>"']/g,function(_0x5a9b0d){const _0x5282d0=_0x4954c6;return{'&':_0x5282d0(0x1d0),'<':_0x5282d0(0x1e6),'>':_0x5282d0(0x210),'\x22':_0x5282d0(0x1cd),'\x27':_0x5282d0(0x1ed)}[_0x5a9b0d];});}async function sendMessage(){const _0x1971e9=_0x4f7e44;if(isProcessing)return;isProcessing=!![];const _0x3433d5=document[_0x1971e9(0x1ce)](_0x1971e9(0x21a)),_0x5ab81d=document['getElementById']('send-btn'),_0x8f8509=_0x3433d5[_0x1971e9(0x1d9)][_0x1971e9(0x21d)]();if(!_0x8f8509)return;_0x5ab81d[_0x1971e9(0x1df)]=!![],displayMessage(_0x8f8509,'user'),_0x3433d5['value']='';const _0x25231c=displayMessage(_0x1971e9(0x21c),'ai',!![]),_0x23db92=_0x8f8509[_0x1971e9(0x1e5)](),_0x26cbd3=await searchLocalData(_0x23db92);let _0xeb1457='';_0x26cbd3?_0xeb1457=_0x1971e9(0x219)+_0x8f8509+_0x1971e9(0x1e2)+(_0x1971e9(0x20e)+_0x26cbd3[_0x1971e9(0x1e7)]+_0x1971e9(0x203)):_0xeb1457=_0x8f8509;conversationHistory[_0x1971e9(0x204)]({'role':_0x1971e9(0x1f0),'parts':[{'text':_0xeb1457}]});const _0x348a32=await sendMessageToGemini(conversationHistory);conversationHistory[_0x1971e9(0x204)]({'role':_0x1971e9(0x1f1),'parts':[{'text':_0x348a32}]}),replaceMessage(_0x25231c,_0x348a32),_0x5ab81d[_0x1971e9(0x1df)]=![],isProcessing=![];}function displayMessage(_0xd42845,_0xafe260,_0x44def3=![]){const _0x22fe70=_0x4f7e44,_0x22b59f=document[_0x22fe70(0x1ce)](_0x22fe70(0x1f8));let _0x1190ef=escapeHTML(_0xd42845);_0x1190ef=_0x1190ef[_0x22fe70(0x20d)](/\*\*(.*?)\*\*/g,_0x22fe70(0x202)),_0x1190ef=_0x1190ef[_0x22fe70(0x20d)](/\s\*\s/g,_0x22fe70(0x1d7));const _0x45a8e1=document[_0x22fe70(0x1f9)]('p');return _0x45a8e1['className']=_0x22fe70(0x1f6)+_0xafe260,_0x45a8e1[_0x22fe70(0x1fd)]=_0x1190ef,_0x44def3&&_0x45a8e1[_0x22fe70(0x206)][_0x22fe70(0x1e1)]('temporary'),_0x22b59f[_0x22fe70(0x1dd)](_0x45a8e1),_0x22b59f[_0x22fe70(0x217)]=_0x22b59f[_0x22fe70(0x205)],_0x45a8e1;}function typeHTMLByWord(_0x1bf35c,_0x156b4d,_0x40705d=0x64){const _0x3f3b32=_0x4f7e44,_0x25d42b=document[_0x3f3b32(0x1f9)](_0x3f3b32(0x1dc));_0x25d42b[_0x3f3b32(0x1fd)]=_0x156b4d;const _0x2c8fcf=Array[_0x3f3b32(0x1e4)](_0x25d42b[_0x3f3b32(0x214)]);let _0x27ceeb=0x0;function _0x48bdcf(){const _0x4f5afe=_0x3f3b32;if(_0x27ceeb>=_0x2c8fcf[_0x4f5afe(0x1d4)])return;const _0x1c08a5=_0x2c8fcf[_0x27ceeb++];_0x407ef8(_0x1c08a5,_0x1bf35c,_0x48bdcf);}function _0x407ef8(_0x13e977,_0x14b12d,_0x10a7eb){const _0x4d533b=_0x3f3b32;if(_0x13e977[_0x4d533b(0x1d6)]===Node[_0x4d533b(0x1d1)]){const _0x5234e7=_0x13e977[_0x4d533b(0x21b)][_0x4d533b(0x1e8)](/(\s+)/);let _0x86947c=0x0;const _0x1c631d=document[_0x4d533b(0x1f9)](_0x4d533b(0x1da));_0x14b12d[_0x4d533b(0x1dd)](_0x1c631d);function _0xa2aaa6(){const _0x212484=_0x4d533b;_0x86947c<_0x5234e7[_0x212484(0x1d4)]?(_0x1c631d[_0x212484(0x21b)]+=_0x5234e7[_0x86947c++],document[_0x212484(0x1ce)](_0x212484(0x1f8))[_0x212484(0x217)]=document[_0x212484(0x1ce)]('chat-box')['scrollHeight'],setTimeout(_0xa2aaa6,_0x40705d)):_0x10a7eb();}_0xa2aaa6();}else{if(_0x13e977[_0x4d533b(0x1d6)]===Node[_0x4d533b(0x207)]){const _0x2e7d58=_0x13e977[_0x4d533b(0x1de)](![]);_0x14b12d[_0x4d533b(0x1dd)](_0x2e7d58);const _0x4604f3=Array[_0x4d533b(0x1e4)](_0x13e977[_0x4d533b(0x214)]);let _0x12135e=0x0;function _0x140320(){_0x12135e<_0x4604f3['length']?_0x407ef8(_0x4604f3[_0x12135e++],_0x2e7d58,_0x140320):_0x10a7eb();}_0x140320();}else _0x10a7eb();}}_0x48bdcf();}function replaceMessage(_0x1c0e0e,_0x333c6b){const _0x43b617=_0x4f7e44,_0x12957c=document[_0x43b617(0x1ce)](_0x43b617(0x1f8));let _0x11ef8f=escapeHTML(_0x333c6b);_0x11ef8f=_0x11ef8f[_0x43b617(0x20d)](/\*\*(.*?)\*\*/g,_0x43b617(0x202)),_0x11ef8f=_0x11ef8f[_0x43b617(0x20d)](/\s\*\s/g,'<br>'),_0x11ef8f=_0x11ef8f['replace'](/^(\d+\.\s)/gm,_0x43b617(0x201));const _0x19344a=/(https?:\/\/[^\s]+|www\.[^\s]+)/g;_0x11ef8f=_0x11ef8f[_0x43b617(0x20d)](_0x19344a,function(_0x37515b){const _0x432b09=_0x43b617;return _0x432b09(0x1f2)+_0x37515b+_0x432b09(0x208)+_0x37515b+_0x432b09(0x1fa);});const _0x836d4d=document[_0x43b617(0x1f9)]('p');_0x836d4d['className']=_0x43b617(0x1d5),_0x836d4d[_0x43b617(0x1fd)]='\x20',_0x12957c[_0x43b617(0x211)](_0x836d4d,_0x1c0e0e),_0x12957c['scrollTop']=_0x12957c[_0x43b617(0x205)],typeHTMLByWord(_0x836d4d,_0x11ef8f,0x5);}async function sendMessageToGemini(_0x35c477){const _0x4f9d8e=_0x4f7e44;try{const _0x5acc09=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key='+apiKey,{'method':'POST','headers':{'Content-Type':_0x4f9d8e(0x215)},'body':JSON[_0x4f9d8e(0x1e9)]({'contents':_0x35c477})}),_0x15781e=await _0x5acc09[_0x4f9d8e(0x1cf)](),_0x5178b0=_0x15781e?.['candidates']?.[0x0]?.[_0x4f9d8e(0x1db)]?.[_0x4f9d8e(0x1fc)]?.[0x0]?.[_0x4f9d8e(0x200)];return _0x5178b0||'Không\x20có\x20phản\x20hồi.';}catch(_0x155f4f){return console[_0x4f9d8e(0x1ef)](_0x4f9d8e(0x1fe),_0x155f4f),_0x4f9d8e(0x1d2);}}function _0x3349(){const _0x1b2508=['393890QnZzkJ','message\x20','preventDefault','chat-box','createElement','</a>','1574526VXNjTz','parts','innerHTML','Lỗi\x20gọi\x20API:','30sYnLEu','text','<br>$1','<strong>$1</strong>','\x22\x20và\x20hãy\x20chỉnh\x20câu\x20trả\x20lời\x20sinh\x20động.\x20không\x20gửi\x20nhiều\x201\x20lần\x20đường\x20dẫn\x20https\x20\x20','push','scrollHeight','classList','ELEMENT_NODE','\x22\x20target=\x22_blank\x22\x20class=\x22link-document\x22>','2849319lmfioq','Giới\x20thiệu\x20và\x20xin\x20chào:\x20Xin\x20chào\x20tôi\x20là\x20chatbot\x20AI\x20được\x20triển\x20khai\x20bởi\x20NLDK.\x20Bạn\x20cần\x20tôi\x20hỗ\x20trợ\x20gì\x20về\x20tài\x20liệu\x20học\x20tập,\x20hay\x20cần\x20liên\x20hệ\x20với\x20NLDK\x20hoặc\x20điều\x20gì\x20khác.\x20Tôi\x20là\x20AI\x20chia\x20sẻ\x20tài\x20liệu\x20ôn\x20thi\x20cho\x20sinh\x20viên\x20HUIT','AIzaSyDGn0h1_hQl1tegCY9nzyn4FTxuip7hc4s','Enter','replace','Dưới\x20đây\x20là\x20nội\x20dung\x20:\x0a\x22','filter','&gt;','replaceChild','3486344GYTQPY','ctrlKey','childNodes','application/json','keyword','scrollTop','parse','Người\x20dùng\x20hỏi:\x20\x22','user-input','textContent','Bot\x20đang\x20trả\x20lời...','trim','&quot;','getElementById','json','&amp;','TEXT_NODE','Đã\x20xảy\x20ra\x20lỗi\x20khi\x20gọi\x20Gemini\x20API.','https://raw.githubusercontent.com/nguyenledangkhoaa/ai/main/data.json','length','message\x20ai','nodeType','<br>','F12','value','span','content','div','appendChild','cloneNode','disabled','740215tkyxdo','add','\x22.\x0a','Tính\x20năng\x20này\x20đã\x20bị\x20vô\x20hiệu\x20hóa.','from','toLowerCase','&lt;','answer','split','stringify','Lỗi\x20khi\x20tải\x20dữ\x20liệu:','834674zRTiCE','key','&#39;','1YatKld','error','user','model','<a\x20href=\x22','keydown','2329660VCqWgN'];_0x3349=function(){return _0x1b2508;};return _0x3349();}function _0x30af(_0x1abbf1,_0x5e912d){const _0x334910=_0x3349();return _0x30af=function(_0x30afd2,_0x49c7f2){_0x30afd2=_0x30afd2-0x1cd;let _0x8f59c0=_0x334910[_0x30afd2];return _0x8f59c0;},_0x30af(_0x1abbf1,_0x5e912d);}async function searchLocalData(_0x43d3f0){const _0x2187e0=_0x4f7e44;try{const _0x5d315d=await fetch(_0x2187e0(0x1d3)),_0x1298f2=await _0x5d315d['text'](),_0x4087c9=_0x1298f2[_0x2187e0(0x1e8)]('\x0a')[_0x2187e0(0x20f)](_0x2f0696=>_0x2f0696['trim']()!=='');for(const _0x4fb641 of _0x4087c9){const _0x1d5c98=JSON[_0x2187e0(0x218)](_0x4fb641),_0x1bdb6e=_0x1d5c98[_0x2187e0(0x216)];for(const _0x2c0971 of _0x1bdb6e){if(_0x43d3f0[_0x2187e0(0x1e5)]()['includes'](_0x2c0971[_0x2187e0(0x1e5)]()))return{'answer':_0x1d5c98[_0x2187e0(0x1e7)]};}}return null;}catch(_0x53e18a){return console[_0x2187e0(0x1ef)](_0x2187e0(0x1ea),_0x53e18a),null;}}document['addEventListener'](_0x4f7e44(0x1f3),function(_0x5a8da0){const _0x5883f0=_0x4f7e44,_0x552b04=document['getElementById'](_0x5883f0(0x21a));_0x5a8da0[_0x5883f0(0x1ec)]===_0x5883f0(0x20c)&&!_0x552b04[_0x5883f0(0x1df)]&&sendMessage(),(_0x5a8da0[_0x5883f0(0x1ec)]===_0x5883f0(0x1d8)||_0x5a8da0[_0x5883f0(0x213)]&&_0x5a8da0['shiftKey']&&(_0x5a8da0['key']==='I'||_0x5a8da0[_0x5883f0(0x1ec)]==='J')||_0x5a8da0[_0x5883f0(0x213)]&&_0x5a8da0[_0x5883f0(0x1ec)]==='U')&&(_0x5a8da0[_0x5883f0(0x1f7)](),alert(_0x5883f0(0x1e3)));});
