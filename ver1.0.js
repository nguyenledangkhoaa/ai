const _0x501cbe=_0x2830;(function(_0x635b94,_0x4be4bd){const _0x1660bc=_0x2830,_0x51439c=_0x635b94();while(!![]){try{const _0x4190c7=-parseInt(_0x1660bc(0x9f))/0x1+parseInt(_0x1660bc(0x97))/0x2+parseInt(_0x1660bc(0x93))/0x3*(parseInt(_0x1660bc(0xa4))/0x4)+parseInt(_0x1660bc(0xa5))/0x5*(parseInt(_0x1660bc(0x9a))/0x6)+-parseInt(_0x1660bc(0x8d))/0x7*(parseInt(_0x1660bc(0x83))/0x8)+-parseInt(_0x1660bc(0xad))/0x9+-parseInt(_0x1660bc(0x85))/0xa;if(_0x4190c7===_0x4be4bd)break;else _0x51439c['push'](_0x51439c['shift']());}catch(_0xc7b301){_0x51439c['push'](_0x51439c['shift']());}}}(_0x2059,0x4d7f5));const apiKey=_0x501cbe(0x84),systemPrompt=_0x501cbe(0xc0);let conversationHistory=[{'role':_0x501cbe(0xaa),'parts':[{'text':systemPrompt}]}];function escapeHTML(_0x2fc8b1){const _0x46eeb9=_0x501cbe;return _0x2fc8b1[_0x46eeb9(0xc1)](/[&<>"']/g,function(_0x20dd95){const _0x131b7b=_0x46eeb9;return{'&':'&amp;','<':_0x131b7b(0x98),'>':_0x131b7b(0x80),'\x22':_0x131b7b(0xbf),'\x27':_0x131b7b(0xbb)}[_0x20dd95];});}async function sendMessage(){const _0x270cb6=_0x501cbe,_0x294874=document[_0x270cb6(0x82)](_0x270cb6(0x9c)),_0x3c21a3=_0x294874[_0x270cb6(0x8f)][_0x270cb6(0xb2)]();if(!_0x3c21a3)return;displayMessage(_0x3c21a3,'user'),_0x294874[_0x270cb6(0x8f)]='';const _0x23aef7=displayMessage(_0x270cb6(0x94),'ai',!![]),_0x4af99d=_0x3c21a3['toLowerCase'](),_0x210e9b=await searchLocalData(_0x4af99d);let _0x2a2a28='';_0x210e9b?_0x2a2a28='Người\x20dùng\x20hỏi:\x20\x22'+_0x3c21a3+'\x22.\x0a'+(_0x270cb6(0xa3)+_0x210e9b['answer']+_0x270cb6(0xb5)):_0x2a2a28=_0x3c21a3;conversationHistory[_0x270cb6(0xa0)]({'role':_0x270cb6(0xaa),'parts':[{'text':_0x2a2a28}]});const _0x320b58=await sendMessageToGemini(conversationHistory);conversationHistory[_0x270cb6(0xa0)]({'role':'model','parts':[{'text':_0x320b58}]}),replaceMessage(_0x23aef7,_0x320b58);}function displayMessage(_0x277c78,_0x9a2b65,_0x5b6312=![]){const _0x4c99f2=_0x501cbe,_0x487291=document[_0x4c99f2(0x82)](_0x4c99f2(0xbe));let _0x5029ea=escapeHTML(_0x277c78);_0x5029ea=_0x5029ea[_0x4c99f2(0xc1)](/\*\*(.*?)\*\*/g,_0x4c99f2(0xb7)),_0x5029ea=_0x5029ea[_0x4c99f2(0xc1)](/\s\*\s/g,'<br>');const _0x24683e=document[_0x4c99f2(0xb0)]('p');return _0x24683e['className']=_0x4c99f2(0xbd)+_0x9a2b65,_0x24683e['innerHTML']=_0x5029ea,_0x5b6312&&_0x24683e['classList'][_0x4c99f2(0x8a)](_0x4c99f2(0xac)),_0x487291[_0x4c99f2(0xa9)](_0x24683e),_0x487291[_0x4c99f2(0x9e)]=_0x487291['scrollHeight'],_0x24683e;}function replaceMessage(_0x1f3699,_0x5cd7ac){const _0x2eed44=_0x501cbe,_0x50f51c=document[_0x2eed44(0x82)](_0x2eed44(0xbe));let _0xac6399=escapeHTML(_0x5cd7ac);_0xac6399=_0xac6399['replace'](/\*\*(.*?)\*\*/g,_0x2eed44(0xb7)),_0xac6399=_0xac6399[_0x2eed44(0xc1)](/\s\*\s/g,_0x2eed44(0xb1)),_0xac6399=_0xac6399[_0x2eed44(0xc1)](/^(\d+\.\s)/gm,_0x2eed44(0xa8));const _0x3617c2=/(https?:\/\/[^\s]+|www\.[^\s]+)/g;_0xac6399=_0xac6399[_0x2eed44(0xc1)](_0x3617c2,function(_0x59f0f8){const _0x1b126e=_0x2eed44;return _0x1b126e(0xb9)+_0x59f0f8+_0x1b126e(0x8e)+_0x59f0f8+_0x1b126e(0xbc);});const _0x4a04a2=document['createElement']('p');_0x4a04a2[_0x2eed44(0xb6)]=_0x2eed44(0x89),_0x4a04a2[_0x2eed44(0x91)]=_0xac6399,_0x50f51c[_0x2eed44(0x87)](_0x4a04a2,_0x1f3699),_0x50f51c['scrollTop']=_0x50f51c[_0x2eed44(0xae)];}function _0x2059(){const _0xe55cb3=['add','Không\x20có\x20phản\x20hồi.','includes','7jcBwst','\x22\x20target=\x22_blank\x22\x20class=\x22link-document\x22>','value','error','innerHTML','keyword','123CxgrGK','Bot\x20đang\x20trả\x20lời...','Tính\x20năng\x20này\x20đã\x20bị\x20vô\x20hiệu\x20hóa.','stringify','455042hyZsil','&lt;','candidates','2033562UDOfSy','answer','user-input','parse','scrollTop','28902oDqehY','push','content','application/json','Dưới\x20đây\x20là\x20nội\x20dung\x20:\x0a\x22','26764EQtyuM','5VvRddO','ctrlKey','text','<br>$1','appendChild','user','split','temporary','406602YExuEp','scrollHeight','category','createElement','<br>','trim','preventDefault','toLowerCase','\x22\x20và\x20hãy\x20chỉnh\x20câu\x20trả\x20lời\x20sinh\x20động.\x20không\x20gửi\x20nhiều\x201\x20lần\x20đường\x20dẫn\x20https\x20\x20','className','<strong>$1</strong>','key','<a\x20href=\x22','Lỗi\x20gọi\x20API:','&#39;','</a>','message\x20','chat-box','&quot;','Giới\x20thiệu\x20và\x20xin\x20chào:\x20Xin\x20chào\x20tôi\x20là\x20chatbot\x20AI\x20được\x20triển\x20khai\x20bởi\x20NLDK.\x20Bạn\x20cần\x20tôi\x20hỗ\x20trợ\x20gì\x20về\x20tài\x20liệu\x20học\x20tập,\x20hay\x20cần\x20liên\x20hệ\x20với\x20NLDK\x20hoặc\x20điều\x20gì\x20khác.\x20Tôi\x20là\x20AI\x20chia\x20sẻ\x20tài\x20liệu\x20ôn\x20thi\x20cho\x20sinh\x20viên\x20HUIT','replace','&gt;','json','getElementById','2445080chFeps','AIzaSyDGn0h1_hQl1tegCY9nzyn4FTxuip7hc4s','1436350eBzQMG','https://raw.githubusercontent.com/nguyenledangkhoaa/ai/main/data.json','replaceChild','parts','message\x20ai'];_0x2059=function(){return _0xe55cb3;};return _0x2059();}async function sendMessageToGemini(_0x583157){const _0x5b34bc=_0x501cbe;try{const _0x437c28=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key='+apiKey,{'method':'POST','headers':{'Content-Type':_0x5b34bc(0xa2)},'body':JSON[_0x5b34bc(0x96)]({'contents':_0x583157})}),_0x291fea=await _0x437c28[_0x5b34bc(0x81)](),_0x58173f=_0x291fea?.[_0x5b34bc(0x99)]?.[0x0]?.[_0x5b34bc(0xa1)]?.[_0x5b34bc(0x88)]?.[0x0]?.[_0x5b34bc(0xa7)];return _0x58173f||_0x5b34bc(0x8b);}catch(_0x1fb298){return console['error'](_0x5b34bc(0xba),_0x1fb298),'Đã\x20xảy\x20ra\x20lỗi\x20khi\x20gọi\x20Gemini\x20API.';}}function _0x2830(_0x26bee4,_0x1a4399){const _0x205958=_0x2059();return _0x2830=function(_0x28302e,_0x1a46e1){_0x28302e=_0x28302e-0x80;let _0x1f6a93=_0x205958[_0x28302e];return _0x1f6a93;},_0x2830(_0x26bee4,_0x1a4399);}async function searchLocalData(_0x32f82e){const _0x3eb7d7=_0x501cbe;try{const _0x5b80c8=await fetch(_0x3eb7d7(0x86)),_0xcb0cf4=await _0x5b80c8['text'](),_0x514282=_0xcb0cf4[_0x3eb7d7(0xab)]('\x0a')['filter'](_0xe62ee1=>_0xe62ee1['trim']()!=='');for(const _0x5e30eb of _0x514282){const _0x95f0a0=JSON[_0x3eb7d7(0x9d)](_0x5e30eb),_0x208ca9=_0x95f0a0[_0x3eb7d7(0x92)];for(const _0x3fbbb2 of _0x208ca9){if(_0x32f82e[_0x3eb7d7(0xb4)]()[_0x3eb7d7(0x8c)](_0x3fbbb2['toLowerCase']()))return{'answer':_0x95f0a0[_0x3eb7d7(0x9b)],'subject':_0x95f0a0[_0x3eb7d7(0xaf)]};}}return null;}catch(_0x229144){return console[_0x3eb7d7(0x90)]('Lỗi\x20khi\x20tải\x20dữ\x20liệu:',_0x229144),null;}}document['addEventListener']('keydown',function(_0xb9bd5b){const _0x4cb3ac=_0x501cbe;(_0xb9bd5b[_0x4cb3ac(0xb8)]==='F12'||_0xb9bd5b[_0x4cb3ac(0xa6)]&&_0xb9bd5b['shiftKey']&&(_0xb9bd5b[_0x4cb3ac(0xb8)]==='I'||_0xb9bd5b[_0x4cb3ac(0xb8)]==='J')||_0xb9bd5b[_0x4cb3ac(0xa6)]&&_0xb9bd5b[_0x4cb3ac(0xb8)]==='U')&&(_0xb9bd5b[_0x4cb3ac(0xb3)](),alert(_0x4cb3ac(0x95)));});
