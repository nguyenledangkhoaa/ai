const _0x2cff19=_0x4aef;(function(_0x957014,_0x17fe14){const _0x5d1558=_0x4aef,_0x560f99=_0x957014();while(!![]){try{const _0x55da68=parseInt(_0x5d1558(0x1e4))/0x1+parseInt(_0x5d1558(0x1f2))/0x2*(-parseInt(_0x5d1558(0x1e0))/0x3)+parseInt(_0x5d1558(0x20e))/0x4+-parseInt(_0x5d1558(0x1fb))/0x5*(-parseInt(_0x5d1558(0x219))/0x6)+-parseInt(_0x5d1558(0x1f8))/0x7*(-parseInt(_0x5d1558(0x1ff))/0x8)+-parseInt(_0x5d1558(0x1f4))/0x9+-parseInt(_0x5d1558(0x221))/0xa;if(_0x55da68===_0x17fe14)break;else _0x560f99['push'](_0x560f99['shift']());}catch(_0xace41d){_0x560f99['push'](_0x560f99['shift']());}}}(_0xb5dc,0x4f2ef));const apiKey=_0x2cff19(0x1f9),systemPrompt='Giới\x20thiệu\x20và\x20xin\x20chào:\x20Xin\x20chào\x20tôi\x20là\x20chatbot\x20AI\x20được\x20triển\x20khai\x20bởi\x20NLDK.\x20Bạn\x20cần\x20tôi\x20hỗ\x20trợ\x20gì\x20về\x20tài\x20liệu\x20học\x20tập,\x20hay\x20cần\x20liên\x20hệ\x20với\x20NLDK\x20hoặc\x20điều\x20gì\x20khác.\x20Tôi\x20là\x20AI\x20chia\x20sẻ\x20tài\x20liệu\x20ôn\x20thi\x20cho\x20sinh\x20viên\x20HUIT';let isProcessing=![],conversationHistory=[{'role':_0x2cff19(0x204),'parts':[{'text':systemPrompt}]}];function _0x4aef(_0x5bfc3a,_0x48dab5){const _0xb5dc7f=_0xb5dc();return _0x4aef=function(_0x4aef97,_0x2a96f9){_0x4aef97=_0x4aef97-0x1df;let _0x184fdc=_0xb5dc7f[_0x4aef97];return _0x184fdc;},_0x4aef(_0x5bfc3a,_0x48dab5);}function escapeHTML(_0x4a9086){const _0x522eec=_0x2cff19;return _0x4a9086[_0x522eec(0x218)](/[&<>"']/g,function(_0x46bf10){const _0x410f45=_0x522eec;return{'&':_0x410f45(0x210),'<':_0x410f45(0x1f1),'>':_0x410f45(0x1f3),'\x22':_0x410f45(0x1ed),'\x27':_0x410f45(0x1e5)}[_0x46bf10];});}function _0xb5dc(){const _0x40659e=['ctrlKey','Bot\x20đang\x20trả\x20lời...','user','temporary','parts','error','content','Lỗi\x20gọi\x20API:','addEventListener','https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=','model','split','2353904KhYxZJ','answer','&amp;','\x22.\x0a','send-btn','message\x20','innerHTML','Đã\x20xảy\x20ra\x20lỗi\x20khi\x20gọi\x20Gemini\x20API.','application/json','\x22\x20target=\x22_blank\x22\x20class=\x22link-document\x22>','replace','6mgReLy','<strong>$1</strong>','text','keyword','key','Dưới\x20đây\x20là\x20nội\x20dung\x20:\x0a\x22','<a\x20href=\x22','filter','9915560BXIDuL','user-input','1113eRojFZ','classList','replaceChild','category','605149bLhDal','&#39;','chat-box','trim','className','getElementById','Lỗi\x20khi\x20tải\x20dữ\x20liệu:','createElement','<br>$1','&quot;','candidates','<br>','scrollHeight','&lt;','3158HiqEhn','&gt;','385299UqJVJy','scrollTop','Người\x20dùng\x20hỏi:\x20\x22','push','7BgPOVK','AIzaSyDGn0h1_hQl1tegCY9nzyn4FTxuip7hc4s','\x22\x20và\x20hãy\x20chỉnh\x20câu\x20trả\x20lời\x20sinh\x20động.\x20không\x20gửi\x20nhiều\x201\x20lần\x20đường\x20dẫn\x20https\x20\x20','1739845iuYbEw','https://raw.githubusercontent.com/nguyenledangkhoaa/ai/main/data.json','keydown','toLowerCase','3223336foLEYl','Tính\x20năng\x20này\x20đã\x20bị\x20vô\x20hiệu\x20hóa.','disabled'];_0xb5dc=function(){return _0x40659e;};return _0xb5dc();}async function sendMessage(){const _0x3d15f9=_0x2cff19;if(isProcessing)return;isProcessing=!![];const _0x8b04e=document[_0x3d15f9(0x1e9)](_0x3d15f9(0x1df)),_0x4d66fb=document['getElementById'](_0x3d15f9(0x212)),_0xbb8ec8=_0x8b04e['value'][_0x3d15f9(0x1e7)]();if(!_0xbb8ec8)return;_0x4d66fb['disabled']=!![],displayMessage(_0xbb8ec8,_0x3d15f9(0x204)),_0x8b04e['value']='';const _0xbfe4e2=displayMessage(_0x3d15f9(0x203),'ai',!![]),_0x2069a6=_0xbb8ec8[_0x3d15f9(0x1fe)](),_0x4f26ae=await searchLocalData(_0x2069a6);let _0x2c9aa3='';_0x4f26ae?_0x2c9aa3=_0x3d15f9(0x1f6)+_0xbb8ec8+_0x3d15f9(0x211)+(_0x3d15f9(0x21e)+_0x4f26ae[_0x3d15f9(0x20f)]+_0x3d15f9(0x1fa)):_0x2c9aa3=_0xbb8ec8;conversationHistory[_0x3d15f9(0x1f7)]({'role':_0x3d15f9(0x204),'parts':[{'text':_0x2c9aa3}]});const _0x3081c9=await sendMessageToGemini(conversationHistory);conversationHistory[_0x3d15f9(0x1f7)]({'role':_0x3d15f9(0x20c),'parts':[{'text':_0x3081c9}]}),replaceMessage(_0xbfe4e2,_0x3081c9),_0x4d66fb[_0x3d15f9(0x201)]=![],isProcessing=![];}function displayMessage(_0x119ba6,_0x3588e6,_0xc7b970=![]){const _0x7bfc7d=_0x2cff19,_0x40c14e=document[_0x7bfc7d(0x1e9)](_0x7bfc7d(0x1e6));let _0x51b6a2=escapeHTML(_0x119ba6);_0x51b6a2=_0x51b6a2[_0x7bfc7d(0x218)](/\*\*(.*?)\*\*/g,_0x7bfc7d(0x21a)),_0x51b6a2=_0x51b6a2[_0x7bfc7d(0x218)](/\s\*\s/g,_0x7bfc7d(0x1ef));const _0x75edb3=document[_0x7bfc7d(0x1eb)]('p');return _0x75edb3['className']=_0x7bfc7d(0x213)+_0x3588e6,_0x75edb3[_0x7bfc7d(0x214)]=_0x51b6a2,_0xc7b970&&_0x75edb3[_0x7bfc7d(0x1e1)]['add'](_0x7bfc7d(0x205)),_0x40c14e['appendChild'](_0x75edb3),_0x40c14e[_0x7bfc7d(0x1f5)]=_0x40c14e[_0x7bfc7d(0x1f0)],_0x75edb3;}function replaceMessage(_0x50ebd4,_0x255749){const _0x536801=_0x2cff19,_0x746b69=document[_0x536801(0x1e9)](_0x536801(0x1e6));let _0x3053da=escapeHTML(_0x255749);_0x3053da=_0x3053da[_0x536801(0x218)](/\*\*(.*?)\*\*/g,'<strong>$1</strong>'),_0x3053da=_0x3053da['replace'](/\s\*\s/g,'<br>'),_0x3053da=_0x3053da[_0x536801(0x218)](/^(\d+\.\s)/gm,_0x536801(0x1ec));const _0x42d288=/(https?:\/\/[^\s]+|www\.[^\s]+)/g;_0x3053da=_0x3053da[_0x536801(0x218)](_0x42d288,function(_0x38fb80){const _0x158cf2=_0x536801;return _0x158cf2(0x21f)+_0x38fb80+_0x158cf2(0x217)+_0x38fb80+'</a>';});const _0x42279c=document[_0x536801(0x1eb)]('p');_0x42279c[_0x536801(0x1e8)]='message\x20ai',_0x42279c['innerHTML']=_0x3053da,_0x746b69[_0x536801(0x1e2)](_0x42279c,_0x50ebd4),_0x746b69['scrollTop']=_0x746b69[_0x536801(0x1f0)];}async function sendMessageToGemini(_0x55cd3c){const _0x2260b2=_0x2cff19;try{const _0x446408=await fetch(_0x2260b2(0x20b)+apiKey,{'method':'POST','headers':{'Content-Type':_0x2260b2(0x216)},'body':JSON['stringify']({'contents':_0x55cd3c})}),_0x1ba0a7=await _0x446408['json'](),_0x5a4ffb=_0x1ba0a7?.[_0x2260b2(0x1ee)]?.[0x0]?.[_0x2260b2(0x208)]?.[_0x2260b2(0x206)]?.[0x0]?.[_0x2260b2(0x21b)];return _0x5a4ffb||'Không\x20có\x20phản\x20hồi.';}catch(_0x534afb){return console[_0x2260b2(0x207)](_0x2260b2(0x209),_0x534afb),_0x2260b2(0x215);}}async function searchLocalData(_0x4846ea){const _0x28b4b9=_0x2cff19;try{const _0x5cb440=await fetch(_0x28b4b9(0x1fc)),_0x33b8e2=await _0x5cb440[_0x28b4b9(0x21b)](),_0x5bcc17=_0x33b8e2[_0x28b4b9(0x20d)]('\x0a')[_0x28b4b9(0x220)](_0xd80b29=>_0xd80b29['trim']()!=='');for(const _0x3530fe of _0x5bcc17){const _0x353e0e=JSON['parse'](_0x3530fe),_0x5bb8e9=_0x353e0e[_0x28b4b9(0x21c)];for(const _0x2cc53a of _0x5bb8e9){if(_0x4846ea[_0x28b4b9(0x1fe)]()['includes'](_0x2cc53a[_0x28b4b9(0x1fe)]()))return{'answer':_0x353e0e[_0x28b4b9(0x20f)],'subject':_0x353e0e[_0x28b4b9(0x1e3)]};}}return null;}catch(_0x3aafcc){return console[_0x28b4b9(0x207)](_0x28b4b9(0x1ea),_0x3aafcc),null;}}document[_0x2cff19(0x20a)](_0x2cff19(0x1fd),function(_0x5f3c33){const _0x1f7584=_0x2cff19,_0x5413d3=document['getElementById'](_0x1f7584(0x1df));_0x5f3c33[_0x1f7584(0x21d)]==='Enter'&&!_0x5413d3['disabled']&&sendMessage(),(_0x5f3c33[_0x1f7584(0x21d)]==='F12'||_0x5f3c33[_0x1f7584(0x202)]&&_0x5f3c33['shiftKey']&&(_0x5f3c33['key']==='I'||_0x5f3c33['key']==='J')||_0x5f3c33['ctrlKey']&&_0x5f3c33[_0x1f7584(0x21d)]==='U')&&(_0x5f3c33['preventDefault'](),alert(_0x1f7584(0x200)));});
